\documentclass[crop,border={-5pt 2pt 2pt 2pt}]{standalone}
\input{../latex/pics}
\tikzset{font={\selectfont\itshape}}
\begin{document}

\tikzstyle{box}    = [draw=black,fill=tgrey]
\tikzstyle{tnode}  = [font={\selectfont\ttfamily}]
\tikzstyle{arrowB} = [black,arrows={-Latex[width=5pt, length=5pt]}]
\tikzstyle{arrowW} = [black,arrows={-Latex[width=5pt, length=5pt, fill=white]}]

\begin{tikzpicture}[align=center]

\newcommand\n{2}
\newcommand\w{1.5}

\foreach \x in {0,...,\n} {
  \draw[box] (\w*\x+.5,0.5) rectangle node[below=.6cm, midway] (\x) {\x} ++(\w,+0.5) ; 
  \draw[box] (\w*\x+.5,2.0) rectangle ++(\w,+0.5) ; }
  
\path (0,.75) node[tnode] (B) {B}
	++(0,1.5) node[tnode] (A) {A}	
	++(\w*\n+\w+\w/2,-.75) node {\large\ldots};
	
\node[left  = .85cm of 0] {i};	

\draw[arrowB] (3,3.1) -- ++(.5,0) 
	node[tnode, right, xshift=3pt] {\circled{S2}};

\draw[arrowW] (1,3.1) -- ++(.5,0) 
	node[tnode, right, xshift=3pt] {\circled{S1}};

\foreach \x in {1,...,\n} {
	\draw[arrowB] ((\w*\x+-.2,2) -- ++(\w,-1);	
	\draw[arrowW] ((\w*\x+-.2,1) -- ++(\w, 1); }
	
\end{tikzpicture}
\end{document}
