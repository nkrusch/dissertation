\begin{figure}
\begin{subfigure}{\textwidth}
    \begin{centering}
    \begin{prooftree}[small]
        \infer[left label={\(\star\in\{+, -\}\)}]0[E\(^{\textsc{A}}\)]{\vdash \text{\pr|Xi $\star$ Xj|} : (0 \mapsto \{_{\text{\pr|i|}}^{m}, _{\text{\pr|j|}}^{p}\}) \oplus (1 \mapsto \{_{\text{\pr|i|}}^{p}, _{\text{\pr|j|}}^{m}\}) \oplus (2 \mapsto \{_{\text{\pr|i|}}^{w}, _{\text{\pr|j|}}^{w}\})}
    \end{prooftree}
    \\[1.2em]
    \hfill
    \begin{prooftree}[small]
        \infer0[S]{ \text{\pr|skip|} : \umat }
    \end{prooftree}
    \hspace{4em}
    \begin{prooftree}[small]
    \infer0[E\(^{\textsc{M}}\)]{ \vdash \text{\pr|Xi * Xj|} : \{ _{\text{\pr|i|}}^{w}, _{\text{\pr|j|}}^{w} \}}
    \end{prooftree}
    \hspace{4em}
    \begin{prooftree}[small]
        \infer0[E\(^{\textsc{S}}\)]{ \vdash \text{\pr|Xi|} : \{ _{\text{\pr|i|}}^{m}\}}
    \end{prooftree}\hfill
    \end{centering}
\end{subfigure}
\\[1.2em]
\begin{subfigure}{\textwidth}
\begin{centering}
    \begin{prooftree}[small]
        \hypo{ \vdash \text{\pr{e}} : V}
        \infer1[A]{\vdash \text{\pr|Xj = e|} : \umat \xleftarrow{\text{\pr|j|}} V}
    \end{prooftree}
    \hfill
    \begin{prooftree}[small]
        \hypo{ \vdash \text{\pr{C1}} : M_1}
        \hypo{ \vdash \text{\pr{C2}} : M_2}
        \infer2[C]{\vdash \text{\pr{C1; C2}} : M_1 \otimes M_2}
    \end{prooftree}
    \hfill
    \begin{prooftree}[small]
        \hypo{ \vdash \text{\pr{C1}} : M_1}
        \hypo{ \vdash \text{\pr{C2}} : M_2}
        \infer2[I]{\vdash \text{\pr|if b then C1 $\text{\hspace{.3em}}$  else C2|} : M_1 \oplus M_2}
    \end{prooftree}
    \\[1.2em]
    \begin{prooftree}[small]
        \hypo{ \vdash \text{\pr|C|}: M }
        \infer1[L\(^{\infty}\)]{\vdash \text{\pr|loop Xl \{C\}|} : M^* \oplus \{_{j}^{\infty} \rightarrow j \mid M^*_{jj} \neq m\} \oplus \{_{\text{\pr|l|}}^{p}\rightarrow j \mid \exists i, M_{ij}^* = p\} } 			\end{prooftree}
    \\[1.2em]
    \begin{prooftree}[small]
        \hypo{ \vdash \text{\pr|C|}: M }
        \infer1[W\(^{\infty}\)]{\vdash \text{\pr|while b do \{C\}|} : M^* \oplus \{_{j}^{\infty} \rightarrow j \mid M^*_{jj} \neq m\} \oplus \{_{i}^{\infty}\rightarrow j \mid  M_{ij}^* = p\} } 			\end{prooftree}
\end{centering}
\end{subfigure}
\caption{The improved deterministic flow analysis rules.}
\label{fig:rules}
\end{figure}