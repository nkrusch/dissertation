%! suppress = NonBreakingSpace
%-------------------------------------------------------------------------------
% Custom macros
%-------------------------------------------------------------------------------

% Manuscript headers
\newcommand\CTNT{ClÃ©ment Aubert, Thomas Rubiano, Neea Rusch, Thomas Seiller}
\newcommand\ainfo[2]{\noindent{#1}\newline\noindent{#2}\newpage}
\newcommand\ainfoX[3]{\noindent{#1}\newline\noindent{#2}\vspace{1em}\newline{#3}\newpage}

% Document commands
\newcommand{\aref}[1]{\hyperref[#1]{\ref*{#1}}}
\newcommand{\swlink}[2]{\texttt{\footnotesize{\href{#1}{#2}}}}
\newcommand{\nonterm}[1]{#1} % ott
\newcommand*\lstinputpath[1]{\lstset{inputpath=#1}}
\newcommand{\smtabularnote}[1]{\tabularnote{\small{#1}}}
\newcommand{\ompi}[1]{\index{OpenMP directives!{#1}}}
\newcommand{\ccxi}[1]{\index{complexity classes!\textsc{#1}}}
\newcommand{\ccx}[1]{\textsc{#1}\ccxi{#1}}
\newcommand{\ndx}[1]{#1\index{#1}}

% Inline codes
\newcommand{\pr}{\lstinline[mathescape,basicstyle=\normalfont\ttfamily,escapeinside={(*}{*)},prebreak={}]}
\newcommand{\prm}[1]{\text{\pr|#1|}}
\newcommand{\prc}{\lstinline[mathescape=true]}
\newcommand{\omp}[1]{\lstinline[language=OpenMP,basicstyle=\ttfamily\color{black},keywordstyle=\ttfamily\color{black}]|#1|\ompi{#1}}

% apa-style citation fix
\renewcommand{\cite}[2][]{\autocite[#1]{#2}}

% continuous appendix
\newcommand{\continousappendix}{
 \renewcommand{\thechapter}{\arabic{chapter}}
 \setcounter{chapter}{6}} % chapters are fixed anyway

% paper category icons
\newcommand{\pageIcon}[2]{
\raisebox{-0.3\height}{\begin{tikzpicture}
\node[circle,inner sep=2pt,outer sep=.4pt,fill=white,draw=black,solid,thick]{#1};
\end{tikzpicture}}\hspace{1em}\textit{Implicit computational complexity \& #2}\par}
\newcommand{\pageIconAnalysis}{\pageIcon{\iconSPA}{static analysis}}
\newcommand{\pageIconFm}{\pageIcon{\iconFM}{formal methods}}
\newcommand{\pageIconOpt}{\pageIcon{\iconOPT}{program optimization}}
\newcommand{\pageIconSecurity}{\pageIcon{\iconSEC}{security}}

% boxed text
\makeatletter
\renewcommand{\boxed}[1]{\text{\fboxsep=.2em\fbox{\m@th$\displaystyle#1$}}}
\makeatother

% text with background color
\newcommand{\hilight}[2]{\makebox[5pt][l]{\color{#1!20!white}\rule[-4pt]{#2}{14pt}}}

% Fix \sc undefined
\providecommand{\sc}{}
\renewcommand{\sc}[1]{#1}

% tabularx custom maximally-wide column
\newcolumntype{C}{>{\centering\arraybackslash}X}
\newcolumntype{R}{>{\raggedleft\arraybackslash}X}
\newcolumntype{Z}{>{\raggedleft\arraybackslash}X}

% Math operators etc.
\newcommand{\zmat}{\mathbf{0}}
\newcommand{\umat}{\mathbf{1}}
\newcommand\hypo{\Hypo}
%\newcommand\infer{\Infer}
\DeclareMathOperator{\In}{In}
\DeclareMathOperator{\Out}{Out}
\DeclareMathOperator{\PrD}{PrD}
\DeclareMathOperator{\id}{id}
\DeclareMathOperator{\Id}{Id}
\DeclareMathOperator{\var}{var}
\DeclareMathOperator{\Card}{Card}
\DeclareMathOperator{\Occ}{Occ}
\DeclareMathOperator{\poly}{poly}
\renewcommand{\gets}{=} % algorithms

\DeclarePairedDelimiter{\sem}{\llbracket}{\rrbracket} % Semantics of program.
\newcommand{\BNF}{\enspace \ensuremath{\Vert} \enspace} % BNF separator
\newcommand{\mat}[1]{\left(\begin{smallmatrix}#1\end{smallmatrix}\right)} % Shorthand for matrices
\ebproofnewstyle{small}{separation = 1em, rule margin = .5ex}

\newtheorem{thm}{Theorem}
\newtheorem{corollary}[thm]{Corollary}
\newtheorem{lemma}[thm]{Lemma}
\newtheorem{definition}{Definition}
\newtheorem{conjecture}[thm]{Conjecture}
\newtheorem{proposition}{Proposition}[section]
\newtheorem{claim}{Claim}
\newtheorem{remark}{Remark}
\newtheorem{notation}{Notation}
\newtheorem{example}{Example}
\newtheorem{examples}{Examples}
\newtheorem{remarks}{Remarks}
\newtheorem{facts}{Facts}
\newtheorem{fact}{Fact}

% Custom terms
\newcommand\mwp{{mwp}\xspace}
\newcommand{\mwpsc}{\textnormal{\textsc{mwp}}\xspace}
\newcommand{\vdashJK}{\vdash} %_{\textnormal{\textsc{jk}}}}
\newcommand{\DFG}{\textsc{dfg}\xspace}
\newcommand{\dfg}[1]{\mathbb{M}(\mathtt{#1})}
\newcommand{\dfgtilde}[1]{\mathbb{\tilde{M}}(\mathtt{#1})}
\newcommand{\scc}{\textsc{scc}\xspace}
\newcommand{\sccs}{\textnormal{{\scshape SCC}s\xspace}}
\newcommand{\condcorr}[1]{\mathrm{Corr}^{\mathtt{if}}(#1)}
\newcommand{\whilecorr}[1]{\mathrm{Corr}^{\mathtt{while}}(#1)}
\newcommand{\corr}[1]{\mathrm{Cr}(#1)}
\newcommand{\corrc}[1]{\mathrm{Corr}(#1)}
\newcommand{\Var}{\mathrm{Vars}}
\newcommand{\lvl}[1]{\ell(#1)}
\newcommand{\vi}{\textnormal{\scalebox{.65}{\faTint}}}
\newcommand{\nv}{\cdot} % Command for "no leak" / "no violation.
\newcommand{\lname}{\(\top^{\ast}_{\textsc{ni}}\)\@\xspace} % change it if you don't like it
\newcommand{\tool}{\textsc{tyni}\@\xspace}
\newcommand{\nupce}[1]{\buildrel #1 \over \nsim}% Not up to c equilavence

\newcommand{\impl}{$\text{mwp}_\ell$\xspace}
\newcommand{\impf}{$\text{mwp}_f$\xspace}
\newcommand{\explain}{LucidLoop}
\newcommand{\exname}{{\explain}\xspace}
\newcommand{\sfull}{\scalebox{.75}{\faIcon{circle}}\xspace}
\newcommand{\spart}{\scalebox{.75}{\faIcon{adjust}}\xspace}
\newcommand{\snone}{\scalebox{.75}{\faIcon[regular]{circle}}\xspace}
\newcommand{\qsymb}{\faQuestionCircle[regular]}
\newcommand{\qtext}{\scriptsize\qsymb\normalsize}
\newcommand{\myqm}{\scalebox{.75}{\qsymb}}
\newcommand{\myok}{\scalebox{.8}{$\checkmark$}}

\newcommand{\SFM}{{\sc sfm}\xspace}
\newcommand{\SFMs}{{\sc sfm}s\xspace}
\newcommand{\sfm}[1]{\mathbb{M}(#1)}
\newcommand{\sfmb}[1]{\ensuremath{\mathbb{M}^{\mathtt{e}}(#1)}}
\renewcommand{\qedsymbol}{$\square$}
\newcommand{\replabel}{\label} % will be redefined in restatements
\newcommand{\SC}{\mathrm{SC}}
\newcommand{\SCset}{\mathit{SC}}
\newcommand{\LH}{\mathrm{LH}}
\newcommand{\HMO}{\mathrm{HMO}}
\newcommand{\scl}[1]{\ensuremath{\mathit{#1}}}
\newcommand{\SSG}{\mathrm{SSG}}
\newcommand{\orth}{\mathbin{\bot}} % orthogonal
\newcommand{\upce}[1]{\buildrel #1 \over\sim}% Up to c equilavence
\makeatletter
\renewcommand{\nsim}{\mathrel{\mathpalette\n@sim\relax}}
\newcommand{\n@sim}[2]{%
\ooalign{%
    $\m@th#1\sim$\cr
    \hidewidth$\m@th#1\rotatebox[origin=c]{50}{$#1-$}$\hidewidth\cr
}%
}
\makeatother

% Comma after eg and ie
\newcommand*{\eg}{e.g.\@,\xspace}
\newcommand*{\Eg}{E.g.\@,\xspace}
\newcommand*{\cf}{cf.\@\xspace}
\newcommand*{\ie}{i.e.\@,\xspace}
\newcommand*{\aka}{a.k.a.\@\xspace}
\newcommand*{\Ie}{I.e.,\@\xspace}
\newcommand{\stt}{s.t.\@\xspace}
\newcommand*{\resp}{resp.\@\xspace}
\newcommand*{\wrt}{w.r.t.\@\xspace}
\newcommand*{\wlg}{w.l.o.g.\@\xspace}
\renewcommand{\aka}{a.k.a.\@\xspace}
\newcommand{\stsup}{$^\text{st}$\@\xspace}
\newcommand{\ndsup}{$^\text{nd}$\@\xspace}
\newcommand{\thsup}{$^\text{th}$\@\xspace}
\makeatletter
\newcommand*{\etc}{%
    \@ifnextchar{.}%
{etc}%
{etc.\@\xspace}%
}
\makeatother

% HELPERS FOR TERM AND SYMBOLS INDICES
% shorthand for symbols
\newcommand\symbo[1]{\gls{symb:#1}}
\setsepchar{,}
% Includepdf helpers : terms
\makeatletter
\newcommand\addtoindex[2]{\ifnum\AM@page=#2\relax\index{#1}\fi}
\makeatother
\newcommand{\addtoindexm}[2]{\readlist\ipages{#2}\foreachitem\word\in\ipages{\addtoindex{#1}{\word}}}
% Includepdf helpers : symbols
\makeatletter
\newcommand\addtosymbols[2]{\ifnum\AM@page=#2\relax\gls{symb:#1}\fi}
\makeatother
\newcommand{\addtosymbolsm}[2]{\readlist\ipages{#2}\foreachitem\word\in\ipages{\addtosymbols{#1}{\word}}}