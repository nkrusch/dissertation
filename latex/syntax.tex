\newcommand{\pr}{\lstinline[mathescape,basicstyle=\ttfamily,escapeinside={(*}{*)}]}
\newcommand{\prc}{\lstinline[language=C,basicstyle=\ttfamily,keywordstyle=\mdseries]}
\newcommand{\omp}[1]{\lstinline[language=InlineOmp]|#1|\index{OpenMP directives!\texttt{#1}}}
\newcommand{\prm}[1]{\text{\pr|#1|}}

\lstset{
    columns=[l]flexible,
    basicstyle=\small\ttfamily\linespread{4},
    identifierstyle=\color{codeid},
    commentstyle=\color{codecomments},
    keywordstyle=\color{codekeywords}\bfseries,
    ndkeywordstyle=\color{codekeywords}\bfseries,
    stringstyle=\color{codestrings},
    abovecaptionskip=-30pt,
    aboveskip=2em,
    belowskip=2em,
    breakatwhitespace=false,
    breaklines=true,
    captionpos=b,
    escapechar=!,
    escapeinside=||,
    extendedchars=true,
    float=H,
    frame=tb,
    keepspaces=true,
    mathescape=false,
    numbers=left,
    prebreak=\raisebox{0ex}[0ex][0ex]{↲},
    sensitive=true,
    showspaces=false,
    showstringspaces=false,
    showtabs=false,
    tabsize=2,
    upquote=true,
}

\lstdefinestyle{Plain}{
    language=C,
    identifierstyle=\color{black},
    commentstyle=\color{black},
    keywordstyle=\color{black}\bfseries,
    ndkeywordstyle=\color{black}\bfseries,
    stringstyle=\color{black}\ttfamily,
}

\lstdefinestyle{Dafny}{
    language=dafny,
    basicstyle=\small\ttfamily\linespread{4},
    identifierstyle=\color{codeid},
    keywordstyle={\color{codekeywords}\ttfamily\bfseries},
    ndkeywordstyle={\color{codekeywords}\ttfamily\bfseries},
    commentstyle=\color{codecomments},
    stringstyle=\color{codestrings}
}

\lstdefinestyle{openmp}{
    language=OpenMP,
    directivestyle={\color{ompdirective}\ttfamily\bfseries\itshape}
}

\lstnewenvironment{console}{\lstset{
    backgroundcolor=\color{consolebg},
    columns=fullflexible,
	basicstyle=\ttfamily\footnotesize\mdseries,
    showstringspaces=false,
    tabsize=4,
    keepspaces=true,
    showtabs=true,
    showspaces=false,
    framesep=2pt,
    frame=single,
    framerule=.5pt,
    framexleftmargin=5pt,
    framexrightmargin=5pt,
    xleftmargin=5.5pt,
    xrightmargin=5.5pt,
    breaklines=true,
    prebreak=\raisebox{0ex}[0ex][0ex]{↲},
    escapeinside={||},
    numbers=none,
    emph={}
    aboveskip=0em,
    belowskip=0em,
}}{}